<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hot ForGithub - Frontend Category</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(90deg, #0F172A, #1E293B);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .repo-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .lang-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }
        .lang-js { background-color: #f1e05a; }
        .lang-ts { background-color: #3178c6; }
        .lang-html { background-color: #e34c26; }
        .lang-css { background-color: #563d7c; }
    </style>
</head>
<body class="gradient-bg text-gray-100 min-h-screen">
    <header class="container mx-auto py-6 px-4">
        <div class="flex justify-between items-center">
            <a href="index.html" class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400">Hot ForGithub</a>
            <div class="flex space-x-4 items-center">
                <div class="relative">
                    <input type="text" placeholder="Search repositories..." class="bg-slate-700 rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 w-64">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute left-3 top-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <button class="bg-blue-500 hover:bg-blue-600 text-white rounded-lg px-4 py-2 transition-colors">
                    Sign In
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 pb-20">
        <!-- Category Header -->
        <div class="mb-10 flex items-center">
            <div class="w-16 h-16 bg-blue-500 rounded-lg flex items-center justify-center mr-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </div>
            <div>
                <div class="flex items-center">
                    <a href="index.html" class="text-gray-400 hover:text-gray-300">Web Development</a>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mx-2 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                    <h1 class="text-3xl font-bold">Frontend</h1>
                </div>
                <p class="text-gray-400 mt-1">UI frameworks, component libraries, and client-side applications <span class="category-header-count"></span></p>
            </div>
        </div>

        <!-- Filter Options -->
        <div class="mb-8 flex flex-wrap gap-4">
            <div class="flex items-center space-x-3 bg-slate-800 rounded-lg px-4 py-2">
                <span class="text-gray-400">Language:</span>
                <select class="bg-transparent border-none focus:outline-none text-white">
                    <option value="all">All</option>
                    <option value="javascript">JavaScript</option>
                    <option value="typescript">TypeScript</option>
                    <option value="html">HTML</option>
                    <option value="css">CSS</option>
                </select>
            </div>

            <div class="flex items-center space-x-3 bg-slate-800 rounded-lg px-4 py-2">
                <span class="text-gray-400">Sort by:</span>
                <select class="bg-transparent border-none focus:outline-none text-white">
                    <option value="stars">Stars</option>
                    <option value="forks">Forks</option>
                    <option value="updated">Recently Updated</option>
                    <option value="created">Newest</option>
                </select>
            </div>

            <div class="flex items-center space-x-3 bg-slate-800 rounded-lg px-4 py-2">
                <span class="text-gray-400">Framework:</span>
                <select class="bg-transparent border-none focus:outline-none text-white">
                    <option value="all">All</option>
                    <option value="react">React</option>
                    <option value="vue">Vue</option>
                    <option value="angular">Angular</option>
                    <option value="svelte">Svelte</option>
                </select>
            </div>

            <div class="flex items-center space-x-3 bg-slate-800 rounded-lg px-4 py-2">
                <span class="text-gray-400">Date:</span>
                <select class="bg-transparent border-none focus:outline-none text-white">
                    <option value="today">Today</option>
                    <option value="week">This week</option>
                    <option value="month">This month</option>
                    <option value="custom">Custom</option>
                </select>
            </div>
        </div>

        <!-- Featured Projects (these will be hidden once dynamic content loads) -->
        <div class="mb-12 featured-projects">
            <h2 class="text-2xl font-bold mb-6">Featured Projects</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Dynamic content will replace this -->
            </div>
        </div>

        <!-- Popular Repositories - This section will be populated by the JS -->
        <div class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Popular Repositories</h2>
                <a href="#" class="text-blue-400 hover:text-blue-300 text-sm flex items-center">
                    View all
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <!-- This is where the dynamically loaded repos will be displayed -->
            <div class="space-y-4">
                <!-- Loading state will be inserted here by JavaScript -->
            </div>
        </div>
    </main>

    <footer class="container mx-auto px-4 py-8 border-t border-gray-800 mt-12">
        <div class="flex flex-col md:flex-row justify-between items-center">
            <div class="mb-4 md:mb-0">
                <p class="text-gray-400">Â© 2025 Hot ForGithub</p>
            </div>
            <div class="flex space-x-6">
                <a href="#" class="text-gray-400 hover:text-white transition-colors">About</a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">Documentation</a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">GitHub</a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Add the repository fetching script -->
    <script>
        // Repository fetching script for frontend category page
document.addEventListener('DOMContentLoaded', function() {
  // Container for the repositories
  const reposContainer = document.querySelector('.space-y-4');
  
  // Show loading state
  reposContainer.innerHTML = `
    <div class="bg-slate-800 rounded-xl p-6 flex justify-center">
      <div class="flex items-center">
        <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span class="text-xl font-medium text-gray-300">Loading repositories...</span>
      </div>
    </div>
  `;

  // Hide the featured projects section once dynamic content loads
  const featuredSection = document.querySelector('.featured-projects');
  if (featuredSection) {
    featuredSection.style.display = 'none';
  }

  // Function to fetch repos from the API
  async function fetchRepos() {
    try {
      const response = await fetch('http://localhost:45943/day?enrich=true');
      
      if (!response.ok) {
        throw new Error(`API request failed with status ${response.status}`);
      }
      
      const data = await response.json();
      return data;
    } catch (error) {
      console.error('Error fetching repositories:', error);
      reposContainer.innerHTML = `
        <div class="bg-slate-800 rounded-xl p-6 text-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-red-500 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <h3 class="text-xl font-bold text-red-400">Error Loading Repositories</h3>
          <p class="text-gray-400 mt-2">Could not connect to the repository API. Please try again later.</p>
          <button class="mt-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg px-4 py-2 transition-colors" onclick="location.reload()">
            Retry
          </button>
        </div>
      `;
      return null;
    }
  }

  // Function to get language color
  function getLanguageColor(language) {
    const colors = {
      'JavaScript': '#f1e05a',
      'TypeScript': '#3178c6',
      'HTML': '#e34c26',
      'CSS': '#563d7c',
      'Python': '#3572A5',
      'Java': '#b07219',
      'PHP': '#4F5D95',
      'C#': '#178600',
      'Ruby': '#701516',
      'Go': '#00ADD8',
      'Swift': '#F05138',
      'Kotlin': '#A97BFF',
      'Rust': '#DEA584',
      'Dart': '#00B4AB',
      'Shell': '#89e051',
      'Vue': '#41B883'
    };
    
    return colors[language] || '#8f8f8f'; // Default gray color if language not found
  }

  // Function to format date
  function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', { 
      year: 'numeric', 
      month: 'short', 
      day: 'numeric' 
    });
  }

  // Function to render repos
  function renderRepos(repos) {
    if (!repos || Object.keys(repos).length === 0) {
        reposContainer.innerHTML = `
            <div class="bg-slate-800 rounded-xl p-6 text-center">
                <h3 class="text-xl font-bold">No repositories found</h3>
                <p class="text-gray-400 mt-2">Try adjusting your filters or check back later.</p>
            </div>
        `;
        return;
    }

    // Clear the container before appending new elements
    reposContainer.innerHTML = '';

    Object.values(repos).forEach(repo => {
        const {
            name,
            owner: { login, avatar_url },
            description,
            watchers_count,
            language,
            has_wiki,
            forks_count,
            updated_at,
            subscribers_count
        } = repo.info;  // Ensure we're accessing `repo.info`

        console.log(`Repo: ${name}, Owner: ${login}`);

        // Create repo card element
        const repoElement = document.createElement('div');
        repoElement.className = 'bg-slate-800 rounded-xl p-6 card-hover';

        repoElement.innerHTML = `
            <div class="flex justify-between">
                <div class="flex items-start">
                    <div class="w-12 h-12 rounded-md flex items-center justify-center mr-4 overflow-hidden">
                        <img src="${avatar_url}" alt="${login}" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center flex-wrap gap-2">
                            <h3 class="text-lg font-bold">${login}/${name}</h3>
                            ${has_wiki ? '<span class="px-2 py-1 text-xs font-medium rounded-full bg-purple-900 text-purple-300">Wiki</span>' : ''}
                        </div>
                        <p class="text-gray-400 mt-1">${description || 'No description available'}</p>
                        
                        <div class="flex items-center mt-4 space-x-6 flex-wrap">
                            ${language ? `
                            <div class="flex items-center">
                                <span class="lang-dot" style="background-color: ${getLanguageColor(language)}"></span>
                                <span class="text-sm text-gray-400">${language}</span>
                            </div>` : ''}
                            
                            <div class="flex items-center text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                </svg>
                                <span class="font-bold">${watchers_count.toLocaleString()}</span>
                            </div>
                            
                            <div class="flex items-center text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                                </svg>
                                <span>${forks_count.toLocaleString()}</span>
                            </div>
                            
                            <div class="flex items-center text-gray-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                </svg>
                                <span>${subscribers_count.toLocaleString()}</span>
                            </div>
                        </div>
                        
                        <div class="text-sm text-gray-500 mt-3">
                            Updated on ${formatDate(updated_at)}
                        </div>
                    </div>
                </div>
            </div>
        `;

        // Append to the container
        reposContainer.appendChild(repoElement);
    });
}

  // Initialize: fetch and render repos
  fetchRepos().then(repos => {
    if (repos) {
      renderRepos(repos);
      
      // Update the repository count in the category header if present
      const categoryHeader = document.querySelector('.category-header-count');
      if (categoryHeader) {
        categoryHeader.textContent = `${repos.length} repositories`;
      }
      
      // Setup filter functionality
      setupFilters(repos);
    }
  });

  // Setup filter functionality
  function setupFilters(allRepos) {
    // Language filter
    const languageFilter = document.querySelector('select[class*="bg-transparent"][class*="border-none"]:nth-of-type(1)');
    if (languageFilter) {
      // Clear existing options
      languageFilter.innerHTML = '<option value="all">All</option>';
      
      // Get unique languages
      const languages = [...new Set(allRepos.filter(repo => repo.language).map(repo => repo.language))];
      
      // Add options for each language
      languages.forEach(language => {
        const option = document.createElement('option');
        option.value = language;
        option.textContent = language;
        languageFilter.appendChild(option);
      });
      
      // Add event listener
      languageFilter.addEventListener('change', function() {
        const selectedLanguage = this.value;
        const filteredRepos = selectedLanguage === 'all' 
          ? allRepos 
          : allRepos.filter(repo => repo.language === selectedLanguage);
        renderRepos(filteredRepos);
      });
    }
    
    // Sort by filter
    const sortFilter = document.querySelector('select[class*="bg-transparent"][class*="border-none"]:nth-of-type(2)');
    if (sortFilter) {
      sortFilter.addEventListener('change', function() {
        const sortValue = this.value;
        let sortedRepos = [...allRepos];
        
        switch(sortValue) {
          case 'stars':
            sortedRepos.sort((a, b) => b.watchers_count - a.watchers_count);
            break;
          case 'forks':
            sortedRepos.sort((a, b) => b.forks_count - a.forks_count);
            break;
          case 'updated':
            sortedRepos.sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));
            break;
          case 'created':
            // If created_at exists in the data
            if (sortedRepos[0].created_at) {
              sortedRepos.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            }
            break;
        }
        
        renderRepos(sortedRepos);
      });
    }
    
    // Framework filter - this would need repo data to include framework info
    const frameworkFilter = document.querySelector('select[class*="bg-transparent"][class*="border-none"]:nth-of-type(3)');
    if (frameworkFilter) {
      frameworkFilter.addEventListener('change', function() {
        const selectedFramework = this.value.toLowerCase();
        
        // Skip filtering if "all" is selected
        if (selectedFramework === 'all') {
          renderRepos(allRepos);
          return;
        }
        
        // Look for framework in name or description
        const filteredRepos = allRepos.filter(repo => {
          const nameMatch = repo.name.toLowerCase().includes(selectedFramework);
          const descMatch = repo.description && repo.description.toLowerCase().includes(selectedFramework);
          return nameMatch || descMatch;
        });
        
        renderRepos(filteredRepos);
      });
    }
    
    // Add search functionality
    const searchInput = document.querySelector('input[placeholder="Search repositories..."]');
    if (searchInput) {
      searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase().trim();
        
        if (!searchTerm) {
          renderRepos(allRepos);
          return;
        }
        
        const filteredRepos = allRepos.filter(repo => {
          const nameMatch = (repo.name && repo.name.toLowerCase().includes(searchTerm)) || 
                           (repo.owner.login && repo.owner.login.toLowerCase().includes(searchTerm));
          const descMatch = repo.description && repo.description.toLowerCase().includes(searchTerm);
          return nameMatch || descMatch;
        });
        
        renderRepos(filteredRepos);
      });
    }
  }
});
    </script>
</body>
</html>